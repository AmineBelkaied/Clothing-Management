"use strict";(self.webpackChunkclothing_management_frontend=self.webpackChunkclothing_management_frontend||[]).push([[266],{1266:(M,c,n)=>{n.r(c),n.d(c,{GetTenantsModule:()=>T});var h=n(177),g=n(1141),a=n(4341),u=n(2242),f=n(9615),p=n(9998),r=n(5574),t=n(4438),v=n(9212),C=n(819),m=n(8833);const I=()=>({minWidth:"100%"});let x=(()=>{class e{constructor(s,i,o,l){this.authService=s,this.storageService=i,this.router=o,this.route=l,this.tenants=[],this.valCheck=["remember"],this.form={userName:null,password:null,tenantOrClientId:""},this.isLoggedIn=!1,this.isLoginFailed=!1,this.errorMessage="",this.roles=[],this.form=this.router.getCurrentNavigation().extras.state}ngOnInit(){this.authService.getTenantsByUser(this.form.userName).subscribe(s=>{console.log(s),this.tenants=s}),this.storageService.isUserLoggedIn()&&(this.isLoggedIn=!0,this.roles=this.storageService.getUser().roles)}login(){console.log("form ",this.form),this.authService.secondLogin(this.form).subscribe({next:s=>{console.log("data",s),this.storageService.saveUser(s),this.isLoginFailed=!1,this.isLoggedIn=!0,this.roles=this.storageService.getUser().roles,this.router.navigate(["/"])},error:s=>{console.log(s),this.isLoginFailed=!0}})}reloadPage(){window.location.reload()}static{this.\u0275fac=function(i){return new(i||e)(t.rXU(v.u),t.rXU(C.n),t.rXU(r.Ix),t.rXU(r.nX))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-get-tenants"]],decls:11,vars:5,consts:[[1,"surface-ground","flex","align-items-center","justify-content-center","min-h-screen","min-w-screen","overflow-hidden"],[1,"flex","flex-column","align-items-center","justify-content-center"],[2,"border-radius","56px","padding","0.3rem","background","linear-gradient(180deg, var(--primary-color) 10%, rgba(33, 150, 243, 0) 30%)"],[1,"w-full","surface-card","py-8","px-5","sm:px-8",2,"border-radius","53px"],[1,"text-center","mb-5"],[1,"text-900","text-3xl","font-medium","mb-3"],["placeholder","Choisir l'entreprise","optionLabel","tenantName","optionValue","tenantClientId","appendTo","body",3,"ngModelChange","options","ngModel"],[1,"flex","align-items-center","justify-content-between","mt-5","gap-5"],["pButton","","pRipple","","label","Login",1,"w-full","p-3","text-xl",3,"click"]],template:function(i,o){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t.EFF(6,"Choisir l'entreprise"),t.k0s()(),t.j41(7,"div")(8,"p-dropdown",6),t.mxI("ngModelChange",function(d){return t.DH7(o.form.tenantOrClientId,d)||(o.form.tenantOrClientId=d),d}),t.k0s(),t.j41(9,"div",7)(10,"button",8),t.bIt("click",function(){return o.login()}),t.k0s()()()()()()()),2&i&&(t.R7$(8),t.Aen(t.lJ4(4,I)),t.Y8G("options",o.tenants),t.R50("ngModel",o.form.tenantOrClientId))},dependencies:[g._f,a.BC,a.vS,m.ms]})}}return e})(),y=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[r.iI.forChild([{path:"",component:x}]),r.iI]})}}return e})(),T=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[h.MD,y,g.tm,u.u,a.YN,f.e,p.MB,m.kr]})}}return e})()}}]);