"use strict";(self.webpackChunkclothing_management_frontend=self.webpackChunkclothing_management_frontend||[]).push([[331],{6331:(x,m,s)=>{s.r(m),s.d(m,{LoginModule:()=>L});var d=s(177),l=s(4662),e=s(4438),f=s(9212),v=s(819),c=s(1141),u=s(2242),g=s(4341),h=s(229);function b(n,y){1&n&&(e.j41(0,"div",13)(1,"span",14),e.EFF(2,"Les coordonn\xe9es sp\xe9cifi\xe9es sont incorrects !"),e.k0s()())}let p=(()=>{class n{constructor(t,i,o,a){this.authService=t,this.storageService=i,this.router=o,this.route=a,this.valCheck=["remember"],this.form={userName:null,password:null,tenantName:null},this.isLoggedIn=!1,this.isLoginFailed=!1,this.errorMessage="",this.roles=[]}ngOnInit(){this.storageService.removeUser(),this.route.paramMap.subscribe(t=>this.form.tenantName=t.get("tenantName")),this.storageService.isUserLoggedIn()&&(this.isLoggedIn=!0,this.roles=this.storageService.getUser().roles)}onSubmit(){console.log(this.form),this.form.tenantName?this.login():this.loginMaster()}login(){this.authService.login(this.form).subscribe({next:t=>{console.log("data",t),this.storageService.saveUser(t),this.storageService.saveTenant(this.form.tenantName),this.isLoginFailed=!1,this.isLoggedIn=!0,this.storageService.isLoggedIn.next(!0),this.roles=this.storageService.getUser().roles,this.router.navigate(["/"])},error:t=>{console.log(t),this.isLoginFailed=!0}})}loginMaster(){this.authService.loginMaster(this.form).subscribe({next:t=>{console.log("data",t),this.storageService.saveUser(t),this.isLoginFailed=!1,this.isLoggedIn=!0,this.storageService.isLoggedIn.next(!0),this.roles=this.storageService.getUser().roles,this.router.navigate(["/auth/tenant"])},error:t=>{console.log(t),this.isLoginFailed=!0}})}reloadPage(){window.location.reload()}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(f.u),e.rXU(v.n),e.rXU(l.Ix),e.rXU(l.nX))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-login"]],decls:19,vars:4,consts:[[1,"surface-ground","flex","align-items-center","justify-content-center","min-h-screen","min-w-screen","overflow-hidden"],[1,"form-container","flex","flex-column","align-items-center","justify-content-center"],[1,"form-border",2,"border-radius","56px","padding","0.3rem","background","linear-gradient(180deg, var(--primary-color) 10%, rgba(33, 150, 243, 0) 30%)"],[1,"form-content","w-full","surface-card","py-4","px-3","sm:px-5",2,"border-radius","53px"],[1,"text-center","mb-5","mt-2"],[1,"text-900","text-2xl","font-medium","mb-3"],["for","username",1,"block","text-900","text-l","font-medium","mb-2"],["id","username","type","text","placeholder","Nom d'utilisateur","pInputText","",1,"w-full","md:w-30rem","mb-5",2,"padding","0.75rem",3,"ngModelChange","ngModel"],["for","password1",1,"block","text-900","font-medium","text-l","mb-2"],["id","password1","placeholder","Mot de passe","styleClass","mb-5","inputStyleClass","w-full p-2 md:w-30rem",3,"ngModelChange","ngModel","toggleMask"],["class","flex align-items-center justify-content-between mb-5 gap-3",4,"ngIf"],[1,"flex","justify-content-center","mb-3"],["pButton","","pRipple","","label","Login",1,"w-50","p-2","text-l",3,"click"],[1,"flex","align-items-center","justify-content-between","mb-5","gap-3"],[2,"color","red","font-size","14px"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.EFF(6,"Connexion"),e.k0s(),e.j41(7,"span"),e.EFF(8,"Clothing Management"),e.k0s()(),e.j41(9,"div")(10,"label",6),e.EFF(11,"Nom d'utilisateur"),e.k0s(),e.j41(12,"input",7),e.mxI("ngModelChange",function(r){return e.DH7(o.form.userName,r)||(o.form.userName=r),r}),e.k0s(),e.j41(13,"label",8),e.EFF(14,"Mot de passe"),e.k0s(),e.j41(15,"p-password",9),e.mxI("ngModelChange",function(r){return e.DH7(o.form.password,r)||(o.form.password=r),r}),e.bIt("ngModelChange",function(){return o.isLoginFailed=!1}),e.k0s(),e.DNE(16,b,3,0,"div",10),e.j41(17,"div",11)(18,"button",12),e.bIt("click",function(){return o.onSubmit()}),e.k0s()()()()()()()),2&i&&(e.R7$(12),e.R50("ngModel",o.form.userName),e.R7$(3),e.R50("ngModel",o.form.password),e.Y8G("toggleMask",!0),e.R7$(),e.Y8G("ngIf",o.isLoginFailed))},dependencies:[d.bT,c._f,u.S,g.me,g.BC,g.vS,h._2],styles:["[_nghost-%COMP%]     .pi-eye, [_nghost-%COMP%]     .pi-eye-slash{transform:scale(1.6);margin-right:1rem;color:var(--primary-color)!important}"]})}return n})(),C=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.$C({type:n});static#n=this.\u0275inj=e.G2t({imports:[l.iI.forChild([{path:"",component:p},{path:":tenantName",component:p}]),l.iI]})}return n})();var M=s(5430);let L=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.$C({type:n});static#n=this.\u0275inj=e.G2t({imports:[d.MD,C,c.tm,M.q4,u.u,g.YN,h.Ou]})}return n})()}}]);