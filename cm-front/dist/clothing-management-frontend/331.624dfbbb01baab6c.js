"use strict";(self.webpackChunkclothing_management_frontend=self.webpackChunkclothing_management_frontend||[]).push([[331],{6331:(I,m,o)=>{o.r(m),o.d(m,{LoginModule:()=>F});var d=o(177),l=o(5574),e=o(4438),p=o(9212),v=o(819),b=o(7302),c=o(1141),u=o(2242),g=o(4341),h=o(229);function C(t,y){1&t&&(e.j41(0,"p",14),e.EFF(1,"Veuillez ajouter le nom la soci\xe9it\xe9 au niveau de l'url (exp: /login/nom-soci\xe9t\xe9)"),e.k0s())}function L(t,y){1&t&&(e.j41(0,"div",15)(1,"span",16),e.EFF(2,"Les coordonn\xe9es sp\xe9cifi\xe9es sont incorrects !"),e.k0s()())}let f=(()=>{class t{constructor(n,i,s,a,r){this.authService=n,this.storageService=i,this.globalConfService=s,this.router=a,this.route=r,this.valCheck=["remember"],this.form={userName:null,password:null,tenantName:null},this.isLoggedIn=!1,this.isLoginFailed=!1,this.errorMessage="",this.roles=[]}ngOnInit(){this.route.paramMap.subscribe(n=>this.form.tenantName=n.get("tenantName")),this.storageService.isUserLoggedIn()&&(this.isLoggedIn=!0,this.storageService.isLoggedIn.next(!0),this.roles=this.storageService.getUser().roles,this.router.navigate(["/"]))}onSubmit(){this.form.tenantName?this.login():this.loginMaster()}login(){this.authService.login(this.form).subscribe({next:n=>{this.storageService.saveUser(n),this.storageService.saveTenant(this.form.tenantName),this.isLoginFailed=!1,this.isLoggedIn=!0,this.storageService.isLoggedIn.next(!0),this.roles=this.storageService.getUser().roles,this.router.navigate(["/packets"]),this.globalConfService.loadGlobalConf()},error:n=>{console.log(n),this.isLoginFailed=!0}})}loginMaster(){this.authService.loginMaster(this.form).subscribe({next:n=>{this.storageService.saveUser(n),this.isLoginFailed=!1,this.isLoggedIn=!0,this.storageService.isLoggedIn.next(!0),this.roles=this.storageService.getUser().roles,this.router.navigate(["/login/tenant"])},error:n=>{console.log(n),this.isLoginFailed=!0}})}reloadPage(){window.location.reload()}static{this.\u0275fac=function(i){return new(i||t)(e.rXU(p.u),e.rXU(v.n),e.rXU(b.N),e.rXU(l.Ix),e.rXU(l.nX))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-login"]],decls:20,vars:6,consts:[[1,"surface-ground","flex","align-items-center","justify-content-center","min-h-screen","min-w-screen","overflow-hidden"],[1,"form-container","flex","flex-column","align-items-center","justify-content-center"],[1,"form-border",2,"border-radius","56px","padding","0.3rem","background","linear-gradient(180deg, var(--primary-color) 10%, rgba(33, 150, 243, 0) 30%)"],[1,"form-content","w-full","surface-card","py-4","px-3","sm:px-5",2,"border-radius","53px"],[1,"text-center","mb-5","mt-2"],[1,"text-900","text-2xl","font-medium","mb-3"],["style","color: red;font-weight: bold;",4,"ngIf"],["for","username",1,"block","text-900","text-l","font-medium","mb-2"],["id","username","type","text","placeholder","Nom d'utilisateur","pInputText","",1,"w-full","md:w-30rem","mb-5",2,"padding","0.75rem",3,"ngModelChange","ngModel"],["for","password1",1,"block","text-900","font-medium","text-l","mb-2"],["id","password1","placeholder","Mot de passe","styleClass","mb-5","inputStyleClass","w-full md:w-30rem",3,"ngModelChange","ngModel","toggleMask","feedback"],["class","flex align-items-center justify-content-between mb-5 gap-3",4,"ngIf"],[1,"flex","justify-content-center","mb-3"],["pButton","","pRipple","","label","Login",1,"w-50","p-2","text-l",3,"click"],[2,"color","red","font-weight","bold"],[1,"flex","align-items-center","justify-content-between","mb-5","gap-3"],[2,"color","red","font-size","1.1rem","font-weight","400"]],template:function(i,s){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.EFF(6,"Connexion"),e.k0s(),e.j41(7,"span"),e.EFF(8,"Clothing Management"),e.k0s(),e.DNE(9,C,2,0,"p",6),e.k0s(),e.j41(10,"div")(11,"label",7),e.EFF(12,"Nom d'utilisateur"),e.k0s(),e.j41(13,"input",8),e.mxI("ngModelChange",function(r){return e.DH7(s.form.userName,r)||(s.form.userName=r),r}),e.k0s(),e.j41(14,"label",9),e.EFF(15,"Mot de passe"),e.k0s(),e.j41(16,"p-password",10),e.mxI("ngModelChange",function(r){return e.DH7(s.form.password,r)||(s.form.password=r),r}),e.bIt("ngModelChange",function(){return s.isLoginFailed=!1}),e.k0s(),e.DNE(17,L,3,0,"div",11),e.j41(18,"div",12)(19,"button",13),e.bIt("click",function(){return s.onSubmit()}),e.k0s()()()()()()()),2&i&&(e.R7$(9),e.Y8G("ngIf",!s.form.tenantName),e.R7$(4),e.R50("ngModel",s.form.userName),e.R7$(3),e.R50("ngModel",s.form.password),e.Y8G("toggleMask",!0)("feedback",!1),e.R7$(),e.Y8G("ngIf",s.isLoginFailed))},dependencies:[d.bT,c._f,u.S,g.me,g.BC,g.vS,h._2],styles:["[_nghost-%COMP%]     .pi-eye, [_nghost-%COMP%]     .pi-eye-slash{transform:scale(1.6);margin-right:1rem;color:var(--primary-color)!important}"]})}}return t})(),M=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({imports:[l.iI.forChild([{path:"",component:f},{path:":tenantName",component:f}]),l.iI]})}}return t})();var x=o(5430);let F=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({imports:[d.MD,M,c.tm,x.q4,u.u,g.YN,h.Ou]})}}return t})()}}]);