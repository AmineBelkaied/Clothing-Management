
  <!-- Calendar section -->
  <div class="container-fluid">
    <div class="card ml-4 mt-2 mb-3" style="background-color: #fbfbfb">
        <div class="card-body">
            <div class="d-flex megabar-header menu">
              <div class="toggle-b-space"></div>
              <div class="menu-middle">
                <H2>Statistique</H2>
              </div>
              <div class="d-flex justify-content-end">
                <p-calendar
                [(ngModel)]="rangeDates"
                (ngModelChange)="findAllPackets()"
                selectionMode="range"
                dateFormat="dd/mm"
                [readonlyInput]="true"
                inputId="range"
                placeholder="Filtrer par date/période"
                [showClear]="true"
                (onClearClick)="resetTable()"
                [showButtonBar]="false"
                [showIcon]="true"
                [style]="{ width: '100%' }"
                [touchUI]="true"
              >
                <ng-template pTemplate="footer">
                  <div class="p-d-flex p-ai-center p-jc-between">
                    <p-button label="All" styleClass="p-button-text" (click)="allDateFilter()"></p-button>
                    <p-button label="Semaine" styleClass="p-button-text" (click)="weekDate()"></p-button>
                    <p-button label="15 jours" styleClass="p-button-text" (click)="twoWeekDate()"></p-button>
                    <p-button label="Mois" styleClass="p-button-text" (click)="monthDate()"></p-button>
                    <p-button label="-4" styleClass="p-button-text" (click)="minus4daysDate()"></p-button>
                    <p-button styleClass="p-button-text" (click)="previousDate()">
                      <i class="pi pi-arrow-left"></i>
                    </p-button>
                    <p-button styleClass="p-button-text" (click)="nextDate()">
                      <i class="pi pi-arrow-right"></i>
                    </p-button>
                    <p-button label="Clear" styleClass="p-button-text" (click)="clearDate()"></p-button>
                  </div>
                </ng-template>
              </p-calendar>
              </div>
          </div>
      </div>
    </div>
  </div>
  <div class="container-fluid">
  <div class="card ml-4 mt-2 mb-3" style="background-color: #fbfbfb">
    <p-card [style]="{ width: '100%'}">
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <h3>Packets Chart</h3>
        </div>
        <div>
          <p-selectButton
            [options]="deliveryCompanyList"
            [(ngModel)]="deliveryCompanyName"
            optionLabel="name"
            optionValue="name"
            (onOptionClick)="getStatAllPacketsChart()"/>
        </div>
        <div>
          <p-selectButton
          [options]="enablerOptions"
          [(ngModel)]="packetsChartEnabler"
          optionLabel="label"
          optionValue="value"
          (click)="packetsChartEnablerChange()"></p-selectButton>
        </div>
      </div>
      <p-tabView *ngIf="packetsChartEnabler">
        <p-tabPanel header="Chart">
          <p-chart type="line" [data]="packetsData" [options]="packetsOptions"></p-chart>
        </p-tabPanel>
        <p-tabPanel header="Table">
          <p-table [value]="packetsTableData" styleClass="p-datatable-sm">
            <ng-template pTemplate="header">
              <tr>
                <th>Model</th>
                <th>Min-Max</th>
                <th>Average</th>
                <th>Sum</th>
                <th>Pourcentage</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-item>
              <tr>
                <td>{{ item.name }}</td>
                <td>{{ item.min }}-{{ item.max }}</td>
                <td>{{ item.avg }}</td>
                <td>{{ item.payed }}</td>
                <td>{{ item.per }}%</td>
              </tr>
            </ng-template>
          </p-table>
        </p-tabPanel>
      </p-tabView>
    </p-card>
  </div>

<!-----------------------------------Models Chart---------------------------------------->

  <div class="card ml-4 mt-2 mb-3" style="background-color: #fbfbfb">
      <p-card [style]="{ width: '100%'}">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <H3>Models Chart</H3>
          </div>
          <div>
            inclure en cours à la somme
            <p-selectButton [options]="progressOptions"  [(ngModel)]="countProgressEnabler" optionLabel="label" optionValue="value" (click)="modelsChartEnablerChange()"></p-selectButton>
          </div>
          <div>
            <p-selectButton [options]="enablerOptions" [(ngModel)]="modelsChartEnabler" optionLabel="label" optionValue="value" (click)="modelsChartEnablerChange()"></p-selectButton>
          </div>
        </div>

        <p-tabView  *ngIf="modelsChartEnabler">
          <p-tabPanel header="Chart">
            <p-chart type="line" [data]="modelsData" [options]="modelsOptions"></p-chart>
          </p-tabPanel>
          <p-tabPanel header="Table">
            <p-table class="table" [value]="modelTableData" >
              <ng-template pTemplate="header">
                <tr>
                  <th>Model</th>
                  <th>Min-Max</th>
                  <th pSortableColumn="avg">Average<p-sortIcon field="avg" /></th>
                  <th pSortableColumn="payed">Payée<p-sortIcon field="payed" /></th>
                  <th>Retour</th>
                  <th>Payée/Retour</th>
                  <th pSortableColumn="profits" >Profits<p-sortIcon field="profits" /></th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-item>
                <tr>
                  <td>{{ item.name }}</td>
                  <td>{{ item.min }}-{{ item.max }}</td>
                  <td>{{ item.avg }}</td>
                  <td>{{ item.payed }}</td>
                  <td>{{ item.retour }}</td>
                  <td>{{ formatNumber(item) }}%</td>
                  <td>{{ item.profits | number:'1.0-0' }}</td>
                </tr>
              </ng-template>
            </p-table>

          </p-tabPanel>
        </p-tabView>
      </p-card>
  </div>

<!-----------------------------------Offers Chart---------------------------------------->

  <div class="card ml-4 mt-2 mb-3" style="background-color: #fbfbfb">
    <p-card [style]="{ width: '100%'}">
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <H3>Offers Chart</H3>
        </div>

        <div>
          <p-selectButton [options]="enablerOptions" [(ngModel)]="offersChartEnabler" optionLabel="label" optionValue="value" (click)="offersChartEnablerChange()"></p-selectButton>
        </div>
      </div>
      <p-tabView *ngIf="offersChartEnabler">
        <p-tabPanel header="Chart">
          <p-chart type="line" [data]="offersData" [options]="offersOptions"></p-chart>
        </p-tabPanel>
        <p-tabPanel header="Table">
          <p-table class="table" [value]="offerTableData">
            <ng-template pTemplate="header">
              <tr>
                <th>Model</th>
                <th>Min-Max</th>
                <th pSortableColumn="avg">Average<p-sortIcon field="avg" /></th>
                <th pSortableColumn="payed">Payée<p-sortIcon field="payed" /></th>
                <th>Retour</th>
                <th>Payée/Retour</th>
                <th pSortableColumn="purchasePrice">Prix Achat<p-sortIcon field="purchasePrice" /></th>
                <th pSortableColumn="sellingPrice">Prix Vente<p-sortIcon field="sellingPrice" /></th>
                <th pSortableColumn="profits" >Profits<p-sortIcon field="profits" /></th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-item>
              <tr>
                <td>{{ item.name }}</td>
                <td>{{ item.min }}-{{ item.max }}</td>
                <td>{{ item.avg }}</td>
                <td>{{ item.payed }}</td>
                <td>{{ item.retour }}</td>
                <td>{{ formatNumber(item) }}%</td>
                <!-- Condition for total row -->
                  <td>{{ item.purchasePrice | number:'1.0-0' }}</td>
                  <td>{{ item.sellingPrice | number:'1.0-0' }}</td>
                  <td>{{ item.profits | number:'1.0-0' }}</td>
              </tr>
            </ng-template>
          </p-table>
        </p-tabPanel>
      </p-tabView>
    </p-card>
  </div>

<!-----------------------------------Colors Chart---------------------------------------->

  <div class="card ml-4 mt-2 mb-3" style="background-color: #fbfbfb">
    <p-card [style]="{ width: '100%'}">
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <H3>Colors Chart</H3>
        </div>
        <div>
          <p-selectButton [options]="enablerOptions"
          [(ngModel)]="colorsChartEnabler"
          optionLabel="label"
          optionValue="value"
          (click)="colorsChartEnablerChange()"></p-selectButton>
        </div>
      </div>
      <p-tabView *ngIf="colorsChartEnabler">
        <p-tabPanel header="Chart">
          <p-chart type="line" [data]="colorsData" [options]="colorsOptions"></p-chart>
        </p-tabPanel>
        <p-tabPanel header="Table">
          <table class="table">
            <thead>
              <tr>
                <th>Model</th>
                <th>Min-Max</th>
                <th>Average</th>
                <th>Payée</th>
                <th>Retour</th>
                <th>Payée/Retour</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of colorsTableData">
                <td>{{ item.name }}</td>
                <td>{{ item.min }}-{{ item.max }}</td>
                <td>{{ item.avg }}</td>
                <td>{{ item.payed }}</td>
                <td>{{ item.retour }}</td>
                <td>{{ formatNumber(item) }}%</td>
              </tr>
            </tbody>
          </table>
        </p-tabPanel>
      </p-tabView>
    </p-card>
  </div>

<!-----------------------------------Stock Chart---------------------------------------->

  <div class="card ml-4 mt-2 mb-3" style="background-color: #fbfbfb">
      <p-card [style]="{ width: '100%'}">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <H3>Stock Chart</H3>
          </div>
          <div>
            <p-selectButton
            [options]="enablerOptions"
            [(ngModel)]="stockChartEnabler"
            optionLabel="label"
            optionValue="value"
            (click)="stockChartEnablerChange()">
          </p-selectButton>
          </div>
        </div>
        <p-tabView *ngIf="stockChartEnabler">
          <p-chart type="line" [data]="stockData" [options]="stockOptions"></p-chart>
        </p-tabView>
      </p-card>
  </div>

<!--------------------------------States Chart---------------------------------------->

  <div class="card ml-4 mt-2 mb-3" style="background-color: #fbfbfb">
    <p-card [style]="{ width: '100%'}">
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <H3>Gouvernerat Chart</H3>
        </div>
        <div class="mb-3">
          <p-selectButton [options]="enablerOptions" [(ngModel)]="statesChartEnabler" optionLabel="label" optionValue="value" (click)="statesChartEnablerChange()"></p-selectButton>
        </div>
      </div>
      <p-tabView *ngIf="statesChartEnabler">
        <p-chart type="bar" [data]="StatesData" [options]="StatesOptions"></p-chart>
      </p-tabView>
    </p-card>
  </div>

<!-------------------------------------Pages Chart---------------------------------------->

  <div class="card ml-4 mt-2 mb-3" style="background-color: #fbfbfb">
      <p-card [style]="{ width: '100%'}">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <H3>Pages Chart</H3>
          </div>
          <div class="mb-3">
            <p-selectButton [options]="enablerOptions" [(ngModel)]="pagesChartEnabler" optionLabel="label" optionValue="value" (click)="pagesChartEnablerChange()"></p-selectButton>
          </div>
        </div>
        <p-tabView *ngIf="pagesChartEnabler">
          <p-chart type="pie" [data]="PagesData" [options]="PagesOptions"></p-chart>
        </p-tabView>
      </p-card>
  </div>
</div>

<!-------------------------------------States/Pages Chart---------------------------------------->
<!--<div class="container-fluid">
  <div class="card ml-4 mt-2 mb-3" style="background-color: #fbfbfb">
    <p-card [style]="{ width: '100%'}">
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <H3>States and pages chart</H3>
        </div>
        <div>
          <p-selectButton
          [options]="enablerOptions"
          [(ngModel)]="statesAndPagesChartEnabler"
          optionLabel="label"
          optionValue="value"
          (click)="statesChartEnablerChange()">
        </p-selectButton>
        </div>
      </div>
        <p-tabView *ngIf="statesAndPagesChartEnabler">
          <p-tabPanel header="Gouvernerat">
                <p-chart type="bar" [data]="StatesData" [options]="StatesOptions"></p-chart>
          </p-tabPanel>
          <p-tabPanel header="Pages">
                <p-chart type="pie" [data]="PagesData" [options]="PagesOptions"></p-chart>
          </p-tabPanel>
        </p-tabView>
    </p-card>
  </div>
</div>-->

