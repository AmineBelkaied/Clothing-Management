
  <!-- Calendar section -->
  <div class="container-fluid">
    <div class="card ml-4 mt-2 mb-3" style="background-color: #fbfbfb">
        <div class="card-body">
            <div class="d-flex megabar-header menu">
              <div class="toggle-b-space"></div>
              <div class="menu-middle">
                <H2>Statistique</H2>
              </div>
              <div class="d-flex justify-content-end">
                <p-calendar
                [(ngModel)]="rangeDates"
                (ngModelChange)="findAllPackets()"
                selectionMode="range"
                dateFormat="dd/mm"
                [readonlyInput]="true"
                inputId="range"
                placeholder="Filtrer par date/période"
                [showClear]="true"
                (onClearClick)="resetTable()"
                [showButtonBar]="false"
                [showIcon]="true"
                [style]="{ width: '100%' }"
                [touchUI]="true"
              >
                <ng-template pTemplate="footer">
                  <div class="p-d-flex p-ai-center p-jc-between">
                    <p-button label="All" styleClass="p-button-text" (click)="allDateFilter()"></p-button>
                    <p-button label="Semaine" styleClass="p-button-text" (click)="weekDate()"></p-button>
                    <p-button label="15 jours" styleClass="p-button-text" (click)="twoWeekDate()"></p-button>
                    <p-button label="Mois" styleClass="p-button-text" (click)="monthDate()"></p-button>
                    <p-button label="-4" styleClass="p-button-text" (click)="minus4daysDate()"></p-button>
                    <p-button styleClass="p-button-text" (click)="previousDate()">
                      <i class="pi pi-arrow-left"></i>
                    </p-button>
                    <p-button styleClass="p-button-text" (click)="nextDate()">
                      <i class="pi pi-arrow-right"></i>
                    </p-button>
                    <p-button label="Clear" styleClass="p-button-text" (click)="clearDate()"></p-button>
                  </div>
                </ng-template>
              </p-calendar>
              </div>
          </div>
      </div>
    </div>
  </div>
  <div class="container-fluid">
  <div class="card ml-4 mt-2 mb-3" style="background-color: #fbfbfb">
    <p-card [style]="{ width: '100%'}">
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <h3>Packets Chart</h3>
        </div>
        <div>
          <p-selectButton
            [options]="deliveryCompanyList"
            [(ngModel)]="deliveryCompanyName"
            optionLabel="name"
            optionValue="name"
            (onOptionClick)="getStatAllPacketsChart()"/>
        </div>
        <div>
          <p-inputSwitch
          [(ngModel)]="packetsChartEnabler"
          optionLabel="label"
          optionValue="value"
          (click)="packetsChartEnablerChange()"></p-inputSwitch>
        </div>
      </div>
      <p-tabView *ngIf="packetsChartEnabler">
        <p-tabPanel header="Table">
          <p-table [value]="packetsTableData" styleClass="p-datatable-sm">
            <ng-template pTemplate="header">
              <tr>
                <th>Etat</th>
                <th>Min-Max</th>
                <th>Average</th>
                <th>Sum</th>
                <th>Pourcentage</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-item>
              <tr>
                <td>{{ item.name }}</td>
                <td>{{ item.min }}-{{ item.max }}</td>
                <td>{{ item.avg }}</td>
                <td>{{ item.payed }}</td>
                <td>{{ item.per }}%</td>
              </tr>
            </ng-template>
          </p-table>
        </p-tabPanel>
        <p-tabPanel header="Chart">
          <p-chart type="line" [data]="packetsData" [options]="packetsOptions" height="30rem"></p-chart>
        </p-tabPanel>
      </p-tabView>
    </p-card>
  </div>

<!-----------------------------------Models Chart---------------------------------------->

<div class="card ml-4 mt-2 mb-3" style="background-color: #fbfbfb">
  <p-card [style]="{ width: '100%'}">
    <div class="d-flex justify-content-between align-items-center">
      <div>
        <H3>Models Chart</H3>
      </div>
      <div>
        inclure en cours à la somme
        <p-inputSwitch [(ngModel)]="countProgressEnabler" optionLabel="label" optionValue="value" (click)="modelsChartEnablerChange()"></p-inputSwitch>
      </div>
      <div>
        <p-inputSwitch  [(ngModel)]="modelsChartEnabler" optionLabel="label" optionValue="value" (click)="modelsChartEnablerChange()">
        </p-inputSwitch>
      </div>
    </div>

    <p-tabView  *ngIf="modelsChartEnabler">
      <p-tabPanel header="Vue d'ensemble">
        <div class="flex justify-content-center mt-2 mb-2" style="background-color: #ffffff">
          <ng-container *ngIf="modelTableData[modelTableData.length - 1] as totalValue">
            <div class="flex-container shadow-6 d-flex justify-content-center mr-2"
              style="cursor: pointer;"
            >
              <div class="flex flex-column align-items-center p-2 relative">
                <!--<i [class]="item.icon" [ngStyle]="{'color': item.color, 'font-size': '1.23rem'}"  class="icon-shadow"></i>-->
                <span class="text-400 mt-1" style="color: black">Nombre d'articles commandé</span>
                <span class="mt-1">
                  <p-badge [value]="totalValue.payed" severity="info"></p-badge>
                </span>
              </div>
            </div>
            <div class="flex-container shadow-6 d-flex justify-content-center mr-2"
              style="cursor: pointer;"
            >
              <div class="flex flex-column align-items-center p-2 relative">
                <!--<i [class]="item.icon" [ngStyle]="{'color': item.color, 'font-size': '1.23rem'}"  class="icon-shadow"></i>-->
                <span class="text-400 mt-1" style="color: black">Article en cours</span>
                <span class="mt-1">
                  <p-badge [value]="totalValue.progress | number:'1.0-0'" severity="info"></p-badge>
                </span>
              </div>
            </div>

            <div class="flex-container shadow-6 d-flex justify-content-center mr-2"
            style="cursor: pointer;"
          >
            <div class="flex flex-column align-items-center p-2 relative">
              <!--<i [class]="item.icon" [ngStyle]="{'color': item.color, 'font-size': '1.23rem'}"  class="icon-shadow"></i>-->
              <span class="text-400 mt-1" style="color: black">moyenne par jour</span>
              <span class="mt-1">
                <p-badge [value]="totalValue.avg | number:'1.0-0'" severity="info"></p-badge>
              </span>
            </div>
          </div>

          <div class="flex-container shadow-6 d-flex justify-content-center mr-2"
          style="cursor: pointer;"
        >
          <div class="flex flex-column align-items-center p-2 relative">
            <!--<i [class]="item.icon" [ngStyle]="{'color': item.color, 'font-size': '1.23rem'}"  class="icon-shadow"></i>-->
            <span class="text-400 mt-1" style="color: black">Profits</span>
            <span class="mt-1">
              <p-badge [value]="totalValue.profits | number:'1.0-0'" severity="info"></p-badge>
            </span>
          </div>
        </div>


          </ng-container>
        </div>

      </p-tabPanel>
      <p-tabPanel header="Table">
        <p-table class="table" [value]="modelTableData"
            sortField="profits" [sortOrder]="-1"
            [scrollable]="true" scrollHeight="400px" >
          <ng-template pTemplate="header">
            <tr>
              <th>Model</th>
              <th>Min-Max</th>
              <th pSortableColumn="avg">Average<p-sortIcon field="avg" /></th>
              <th pSortableColumn="payed">Payée<p-sortIcon field="payed" /></th>
              <th pSortableColumn="progress">En cours<p-sortIcon field="progress" /></th>
              <th>Retour</th>
              <th>Payée/Retour</th>
              <th pSortableColumn="purchasePrice">Prix Achat<p-sortIcon field="purchasePrice" /></th>
              <th pSortableColumn="sellingPrice">Prix Vente<p-sortIcon field="sellingPrice" /></th>
              <th pSortableColumn="profits" >Profits<p-sortIcon field="profits" /></th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-item>
            <tr>
              <td>{{ item.name }}</td>
              <td>{{ item.min }}-{{ item.max }}</td>
              <td>{{ item.avg }}</td>
              <td>{{ item.payed }}</td>
              <td>{{ item.progress }}</td>
              <td>{{ item.retour }}</td>
              <td>{{ formatNumber(item) }}%</td>
              <td>{{ item.purchasePrice | number:'1.0-0' }}</td>
              <td>{{ item.sellingPrice | number:'1.0-0' }}</td>
              <td>{{ item.profits | number:'1.0-0' }}</td>
            </tr>
          </ng-template>
          <ng-template pTemplate="footer">
            <tr>
              <td>{{ totalModel.name }}</td>
              <td>{{ totalModel.min }}-{{ totalModel.max }}</td>
              <td>{{ totalModel.avg }}</td>
              <td>{{ totalModel.payed }}</td>
              <td>{{ totalModel.progress }}</td>
              <td>{{ totalModel.retour }}</td>
              <td>{{ formatNumber(totalModel) }}%</td>
              <td>{{ totalModel.purchasePrice | number:'1.0-0' }}</td>
              <td>{{ totalModel.sellingPrice | number:'1.0-0' }}</td>
              <td>{{ totalModel.profits | number:'1.0-0' }}</td>
            </tr>
          </ng-template>
        </p-table>

      </p-tabPanel>
      <p-tabPanel header="Chart">
        <p-chart type="line" [data]="modelsData" [options]="modelsOptions" height="30rem"></p-chart>
      </p-tabPanel>
    </p-tabView>
  </p-card>
</div>

<!-----------------------------------Offers Chart---------------------------------------->

  <div class="card ml-4 mt-2 mb-3" style="background-color: #fbfbfb">
    <p-card [style]="{ width: '100%'}">
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <H3>Offers Chart</H3>
        </div>

        <div>
          <p-inputSwitch [(ngModel)]="offersChartEnabler" optionLabel="label" optionValue="value" (click)="offersChartEnablerChange()"></p-inputSwitch>
        </div>
      </div>
      <p-tabView *ngIf="offersChartEnabler">

        <p-tabPanel header="Table">
          <p-table class="table" [value]="offerTableData"
              sortField="profits" [sortOrder]="-1"
              [scrollable]="true" scrollHeight="400px" >
            <ng-template pTemplate="header">
              <tr>
                <th>Model</th>
                <th>Min-Max</th>
                <th pSortableColumn="avg">Average<p-sortIcon field="avg" /></th>
                <th pSortableColumn="payed">Payée<p-sortIcon field="payed" /></th>
                <th pSortableColumn="progress">En cours<p-sortIcon field="progress" /></th>
                <th>Retour</th>
                <th>Payée/Retour</th>
                <th pSortableColumn="purchasePrice">Prix Achat<p-sortIcon field="purchasePrice" /></th>
                <th pSortableColumn="sellingPrice">Prix Vente<p-sortIcon field="sellingPrice" /></th>
                <th pSortableColumn="profits" >Profits<p-sortIcon field="profits" /></th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-item>
              <tr>
                <td>{{ item.name }}</td>
                <td>{{ item.min }}-{{ item.max }}</td>
                <td>{{ item.avg }}</td>
                <td>{{ item.payed }}</td>
                <td>{{ item.progress }}</td>
                <td>{{ item.retour }}</td>
                <td>{{ formatNumber(item) }}%</td>
                <!-- Condition for total row -->
                  <td>{{ item.purchasePrice | number:'1.0-0' }}</td>
                  <td>{{ item.sellingPrice | number:'1.0-0' }}</td>
                  <td>{{ item.profits | number:'1.0-0' }}</td>
              </tr>
            </ng-template>
            <ng-template pTemplate="footer">
              <tr>
                <td>{{ totalOffer.name }}</td>
                <td>{{ totalOffer.min }}-{{ totalOffer.max }}</td>
                <td>{{ totalOffer.avg }}</td>
                <td>{{ totalOffer.payed }}</td>
                <td>{{ totalOffer.progress }}</td>
                <td>{{ totalOffer.retour }}</td>
                <td>{{ formatNumber(totalOffer) }}%</td>
                <!-- Condition for total row -->
                  <td>{{ totalOffer.purchasePrice | number:'1.0-0' }}</td>
                  <td>{{ totalOffer.sellingPrice | number:'1.0-0' }}</td>
                  <td>{{ totalOffer.profits | number:'1.0-0' }}</td>
              </tr>
            </ng-template>
          </p-table>
        </p-tabPanel>
        <p-tabPanel header="Chart">
          <p-chart type="line" [data]="offersData" [options]="offersOptions" height="30rem"></p-chart>
        </p-tabPanel>
      </p-tabView>
    </p-card>
  </div>

  <!-----------------------------------Pages Chart---------------------------------------->

<div class="card ml-4 mt-2 mb-3" style="background-color: #fbfbfb">
  <p-card [style]="{ width: '100%'}">
    <div class="d-flex justify-content-between align-items-center">
      <div>
        <H3>Pages Chart</H3>
      </div>
      <div>
        <p-inputSwitch [(ngModel)]="pagesCountChartEnabler" optionLabel="label" optionValue="value" (click)="pagesCountChartEnablerChange()"></p-inputSwitch>
      </div>
    </div>

    <p-tabView  *ngIf="pagesCountChartEnabler">
      <p-tabPanel header="Table">
        <p-table class="table" [value]="pagesCountTableData"
              sortField="profits" [sortOrder]="-1"
              [scrollable]="true" scrollHeight="400px" >
          <ng-template pTemplate="header">
            <tr>
              <th>Model</th>
              <th>Min-Max</th>
              <th pSortableColumn="avg">Average<p-sortIcon field="avg" /></th>
              <th pSortableColumn="payed">Payée<p-sortIcon field="payed" /></th>
              <th pSortableColumn="progress">En cours<p-sortIcon field="progress" /></th>
              <th>Retour</th>
              <th>Payée/Retour</th>
              <th pSortableColumn="profits" >Profits<p-sortIcon field="profits" /></th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-item>
            <tr>
              <td>{{ item.name }}</td>
              <td>{{ item.min }}-{{ item.max }}</td>
              <td>{{ item.avg }}</td>
              <td>{{ item.payed }}</td>
              <td>{{ item.progress }}</td>
              <td>{{ item.retour }}</td>
              <td>{{ formatNumber(item) }}%</td>
              <td>{{ item.profits | number:'1.0-0' }}</td>
            </tr>
          </ng-template>
        </p-table>

      </p-tabPanel>
      <p-tabPanel header="Chart">
        <p-chart type="line" [data]="pagesCountData" [options]="pagesCountOptions" height="30rem"></p-chart>
      </p-tabPanel>

      <p-tabPanel header="O Chart">
        <p-chart type="pie" [data]="PagesData" [options]="PagesOptions"></p-chart>
      </p-tabPanel>
    </p-tabView>
  </p-card>
</div>

<!-----------------------------------Colors Chart---------------------------------------->

  <div class="card ml-4 mt-2 mb-3" style="background-color: #fbfbfb">
    <p-card [style]="{ width: '100%'}">
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <H3>Colors Chart</H3>
        </div>
        <div>
          <p-inputSwitch
          [(ngModel)]="colorsChartEnabler"
          optionLabel="label"
          optionValue="value"
          (click)="colorsChartEnablerChange()"></p-inputSwitch>
        </div>
      </div>
      <p-tabView *ngIf="colorsChartEnabler">
        <p-tabPanel header="Table">
          <table class="table">
            <thead>
              <tr>
                <th></th>
                <th>Color</th>
                <th>Min-Max</th>
                <th>Average</th>
                <th>Payée</th>
                <th>Retour</th>
                <th>Payée/Retour</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of colorsTableData">
                <td><div [ngStyle]="{'background-color':item.hex , 'height': '2rem', 'width': '2rem'}"></div></td>
                <td>{{ item.name }}</td>
                <td>{{ item.min }}-{{ item.max }}</td>
                <td>{{ item.avg }}</td>
                <td>{{ item.payed }}</td>
                <td>{{ item.retour }}</td>
                <td>{{ formatNumber(item) }}%</td>
              </tr>
            </tbody>
          </table>
        </p-tabPanel>
        <p-tabPanel header="Chart">
          <p-chart type="line" [data]="colorsData" [options]="colorsOptions" height="30rem"></p-chart>
        </p-tabPanel>

      </p-tabView>
    </p-card>
  </div>

<!-----------------------------------Stock Chart---------------------------------------->
  <div class="card ml-4 mt-2 mb-3" style="background-color: #fbfbfb">
      <p-card [style]="{ width: '100%'}">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <H3>Stock Chart</H3>
          </div>
          <div>
            <p-inputSwitch
            [(ngModel)]="stockChartEnabler"
            optionLabel="label"
            optionValue="value"
            (click)="stockChartEnablerChange()">
          </p-inputSwitch>
          </div>
        </div>

        <p-tabView *ngIf="stockChartEnabler">
          <p-tabPanel header="Vue d'ensemble">
            <div class="flex justify-content-center mt-2 mb-2" style="background-color: #ffffff">
              <ng-container>
                <div class="flex-container shadow-6 d-flex justify-content-center mr-2"
                  style="cursor: pointer;"
                >
                  <div class="flex flex-column align-items-center p-2 relative">
                    <!--<i [class]="item.icon" [ngStyle]="{'color': item.color, 'font-size': '1.23rem'}"  class="icon-shadow"></i>-->
                    <span class="text-400 mt-1" style="color: black">Nombre d'articles</span>
                    <span class="mt-1">
                      <p-badge [value]="totalStock.quantity" severity="info"></p-badge>
                    </span>
                  </div>
                </div>
                <div class="flex-container shadow-6 d-flex justify-content-center mr-2"
                  style="cursor: pointer;"
                >
                  <div class="flex flex-column align-items-center p-2 relative">
                    <!--<i [class]="item.icon" [ngStyle]="{'color': item.color, 'font-size': '1.23rem'}"  class="icon-shadow"></i>-->
                    <span class="text-400 mt-1" style="color: black">Valeur stock</span>
                    <span class="mt-1">
                      <p-badge [value]="totalStock.purshasePrice | number:'1.0-0'" severity="info"></p-badge>
                    </span>
                  </div>
                </div>
                <div class="flex-container shadow-6 d-flex justify-content-center mr-2"
                  style="cursor: pointer;"
                >
                  <div class="flex flex-column align-items-center p-2 relative">
                    <!--<i [class]="item.icon" [ngStyle]="{'color': item.color, 'font-size': '1.23rem'}"  class="icon-shadow"></i>-->
                    <span class="text-400 mt-1" style="color: black">Valeur de vente</span>
                    <span class="mt-1">
                      <p-badge [value]="totalStock.sellingPrice | number:'1.0-0'" severity="info"></p-badge>
                    </span>
                  </div>
                </div>
                <div class="flex-container shadow-6 d-flex justify-content-center mr-2"
                  style="cursor: pointer;"
                >
                  <div class="flex flex-column align-items-center p-2 relative">
                    <!--<i [class]="item.icon" [ngStyle]="{'color': item.color, 'font-size': '1.23rem'}"  class="icon-shadow"></i>-->
                    <span class="text-400 mt-1" style="color: black">Profis</span>
                    <span class="mt-1">
                      <p-badge [value]="totalStock.profits | number:'1.0-0'" severity="info"></p-badge>
                    </span>
                  </div>
                </div>
              </ng-container>
            </div>

          </p-tabPanel>
          <p-tabPanel header="Table">
            <p-table class="table" [value]="stockValueTableData"
                      sortField="quantity" [sortOrder]="-1"
                      [scrollable]="true" scrollHeight="400px" >
              <ng-template pTemplate="header">
                <tr>
                  <th>Model</th>
                  <th pSortableColumn="quantity">Quantité<p-sortIcon field="quantity" /></th>
                  <th pSortableColumn="purshasePrice">Valeur Stock<p-sortIcon field="purshasePrice" /></th>
                  <th pSortableColumn="sellingPrice">Prix de vente<p-sortIcon field="sellingPrice" /></th>
                  <th pSortableColumn="profits">Profits expercter<p-sortIcon field="profits" /></th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-item>
                <tr>
                  <td>{{ item.name }}</td>
                  <td>{{ item.quantity }}</td>
                  <td>{{ item.purshasePrice | number:'1.0-0' }}</td>
                  <td>{{ item.sellingPrice | number:'1.0-0' }}</td>
                  <td>{{ item.profits | number:'1.0-0' }}</td>
                </tr>
              </ng-template>
              <ng-template pTemplate="footer">
                <tr>
                  <td>{{ totalStock.name }}</td>
                  <td>{{ totalStock.quantity }}</td>
                  <td>{{ totalStock.purshasePrice | number:'1.0-0' }}</td>
                  <td>{{ totalStock.sellingPrice | number:'1.0-0' }}</td>
                  <td>{{ totalStock.profits | number:'1.0-0' }}</td>
                </tr>
              </ng-template>
            </p-table>
          </p-tabPanel>
          <p-tabPanel header="Chart">
            <p-chart type="line" [data]="stockData" [options]="stockOptions" height="30rem"></p-chart>
          </p-tabPanel>
        </p-tabView>
      </p-card>
  </div>

<!--------------------------------States Chart---------------------------------------->

  <div class="card ml-4 mt-2 mb-3" style="background-color: #fbfbfb">
    <p-card [style]="{ width: '100%'}">
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <H3>Gouvernerat Chart</H3>
        </div>
        <div class="mb-3">
          <p-inputSwitch [(ngModel)]="statesChartEnabler" optionLabel="label" optionValue="value" (click)="statesChartEnablerChange()"></p-inputSwitch>
        </div>
      </div>
      <p-tabView *ngIf="statesChartEnabler">
        <p-chart type="bar" [data]="StatesData" [options]="StatesOptions" height="30rem"></p-chart>
      </p-tabView>
    </p-card>
  </div>

<!-------------------------------------States/Pages Chart---------------------------------------->
<!--<div class="container-fluid">
  <div class="card ml-4 mt-2 mb-3" style="background-color: #fbfbfb">
    <p-card [style]="{ width: '100%'}">
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <H3>States and pages chart</H3>
        </div>
        <div>
          <p-selectButton
          [options]="enablerOptions"
          [(ngModel)]="statesAndPagesChartEnabler"
          optionLabel="label"
          optionValue="value"
          (click)="statesChartEnablerChange()">
        </p-selectButton>
        </div>
      </div>
        <p-tabView *ngIf="statesAndPagesChartEnabler">
          <p-tabPanel header="Gouvernerat">
                <p-chart type="bar" [data]="StatesData" [options]="StatesOptions"></p-chart>
          </p-tabPanel>
          <p-tabPanel header="Pages">
                <p-chart type="pie" [data]="PagesData" [options]="PagesOptions"></p-chart>
          </p-tabPanel>
        </p-tabView>
    </p-card>
  </div>
</div>-->

