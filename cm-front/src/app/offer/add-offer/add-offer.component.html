<div class="card" style="width: 100%">
  <div class="card-body">
    <h5 class="card-title mb-3">Offre</h5>
    <div class="card-text">
      <form [formGroup]="offerForm">
        <div class="container-fluid">
          <div class="row mt-5">
            <div class="card" style="width: 100%">
              <div class="card-body">
                <div class="card-text">
                  <div class="container-fluid">
                    <div class="row">
                      <div class="col-md-5">
                        <label for="name" class="form-label">Nom</label>
                        <input
                          pInputText
                          id="name"
                          placeholder="Nom de l'offre"
                          name="name"
                          formControlName="name"
                        />
                      </div>
                      <div class="col-md-5">
                        <label for="price" class="form-label">Prix</label>
                        <input
                          pInputText
                          type="number"
                          id="price"
                          min="1"
                          placeholder="Prix de l'offre"
                          name="price"
                          formControlName="price"
                        />
                      </div>
                      <div class="col-md-2">
                        <div class="row ml-3">
                          <label for="enabled" class="form-label">Activé</label>
                          <p-inputSwitch formControlName="enabled"></p-inputSwitch>
                        </div>
                      </div>
                      <div class="col-md-3 mt-3" style="margin-left: 80%" *ngIf="editMode">
                        <button
                          pButton
                          pRipple
                          [label]="editMode ? 'Modifier offre' : 'Ajouter list offre'"
                          [icon]="editMode ? 'pi pi-pencil' : 'pi pi-plus'"
                          class="p-button-text"
                          (click)="saveOffer('Offer')"
                      ></button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="container-fluid">
          <div class="row mt-5">
            <div class="card" style="width: 100%">
              <div class="card-body">
                <div class="card-text">
                  <div class="container-fluid">
                    <div class="row mt-4">
                      <table
                      class="table table-bordered"
                      style="background-color: #fcfcfc"
                      formArrayName="offerModels"
                    >
                      <thead>
                        <th>Modèle</th>
                        <th>Quantité</th>
                        <th><button
                          pButton
                          pRipple
                          icon="pi pi-plus"
                          class="p-button-success p-button-sm buttonSize"
                          (click)="addModelQuantity()"
                        ></button></th>
                      </thead>
                      <tr
                        *ngFor="
                          let modelQuantity of modelQuantities().controls;
                          let i = index
                        "
                        [formGroupName]="i"
                        class="mt-4"
                      >
                        <td>
                          <p-dropdown
                            [options]="modelList"
                            optionLabel="name"
                            dataKey="id"
                            formControlName="model"
                            [style]="{ width: '70%' }"
                            [panelStyle]="{ width: '100%' }"
                            [showClear]="true"
                            placeholder="Choisir le modèle"
                            appendTo="body"
                          >
                          </p-dropdown>
                        </td>
                        <td>
                          <p-inputNumber
                            class="form-control"
                            
                            id="quantity"
                            placeholder="Quantité"
                            name="quantity"
                            formControlName="quantity"
                          />
                        </td>
                        <td>
                          <button
                            pButton
                            pRipple
                            icon="pi pi-trash"
                            class="p-button-danger p-button-sm buttonSize mt-4"
                            (click)="removeModelQuantity(i)"
                          ></button>
                        </td>
                      </tr>
                    </table>
                    <ng-container
                      *ngIf="modelQuantities().controls.length === 0"
                    >
                      <p style="text-align: center">
                        Ajouter un modèle pour cette offre
                      </p>
                    </ng-container>
                    </div>
                    <div class="col-md-3 mt-3" style="margin-left: 80%" *ngIf="editMode">
                      <button
                        pButton
                        pRipple
                        [label]="editMode ? 'Modifier list models' : 'Ajouter les models'"
                        [icon]="editMode ? 'pi pi-pencil' : 'pi pi-plus'"
                        class="p-button-text"
                        (click)="saveOffer('Models')"
                      ></button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

        </div>
        <div class="container-fluid">
          <div class="row mt-5">
            <div class="card" style="width: 100%">
              <div class="card-body">
                <div class="card-text">
                  <div class="container-fluid">
                    <div class="row mt-4">
                      <div class="col-md-12">
                        <label for="fbPages" class="form-label">Pages Fb</label>
                        <p-multiSelect
                          [options]="fbPages"
                          formControlName="fbPages"
                          name="fbPages"
                          [style]="{ width: '100%' }"
                          [panelStyle]="{ width: '50%' }"
                          [placeholder]="'-- Choisir les pages fb --'"
                          optionLabel="name"
                          appendTo="body"
                        ></p-multiSelect>
                      </div>
                    </div>
                    <div class="col-md-3 mt-3" style="margin-left: 80%">
                      <button
                        pButton
                        pRipple
                        [label]="editMode ? 'Modifier' : 'Ajouter'"
                        [icon]="editMode ? 'pi pi-pencil' : 'pi pi-plus'"
                        class="p-button-text"
                        (click)="saveOffer('FbPages')"
                      ></button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>


      </form>
    </div>
  </div>
</div>
